{"pageProps":{"content":{"html":"        <h1>Client Functions and Script Injection for Page Interaction</h1>\r\n\r\n\r\n<p>You will learn how to run custom JavaScript code on the tested pages, how to use objects like the page model in this code, how to wait for an arbitrary event in the browser, and the fastest way to run a one-liner or an entire JS module.</p>\r\n\r\n<p>End-to-end tests emulate how users interact with the application. In theory, this interaction consists of simple actions like a mouse click on an element, a key press, drag-and-drop, or file upload. The TestCafe API allows you to perform these basic actions with a single line of code. However, real-world applications tend to be more complicated than a static entry form. Some applications cannot be tested without closer interaction with tested pages. In this article, we review several examples and show how knowledge of TestCafe’s internal architecture allows you to test complex or poorly designed pages with the help of client functions and script injection.</p>\r\n<h2 id=\"use-client-functions-to-run-code-in-the-browser__$\"><a class=\"anchor-fix\" href=\"#use-client-functions-to-run-code-in-the-browser\" id=\"use-client-functions-to-run-code-in-the-browser\"></a>Use Client Functions to Run Code in the Browser<a class=\"anchor-hash\" href=\"#use-client-functions-to-run-code-in-the-browser\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h2>\r\n<p>Let’s assume you need to click an element, but another element on the same page overlaps the first one due to design or implementation choices. If you simply call <a class=\"xref\" href=\"/documentation/402710/reference/test-api/testcontroller/click\">t.click</a>, TestCafe waits for the target element to appear in the foreground. When a predefined timeout expires, TestCafe will eventually click the overlapping element. If the test author intended this click, the test completes successfully. However, the entire timeout period is wasted on aimless waiting. You can hide the overlapping element and avoid this pause if you run the following code:</p>\r\n<pre><code class=\"lang-js\">test(&#39;Hide element&#39;, async t =&gt; {\r\n    const hideElement = ClientFunction(() =&gt; {\r\n        document.querySelector(&#39;#id&#39;).style.display = &#39;none&#39;;\r\n    });\r\n  \r\n    await hideElement();\r\n  \r\n    await t.expect(Selector(&#39;#id&#39;).visible).notOk();\r\n});\r\n</code></pre><p>You may also want to update that code and store the element ID in a variable:</p>\r\n<pre><code class=\"lang-js\">test(&#39;Hide element&#39;, async t =&gt; {\r\n    const elementId = &#39;#id&#39;;\r\n    const hideElement = ClientFunction(() =&gt; {\r\n        document.querySelector(elementId).style.display = &#39;none&#39;;\r\n    });\r\n  \r\n    await hideElement();\r\n  \r\n    await t.expect(Selector(elementId).visible).notOk();\r\n});\r\n</code></pre><p>A variable is a good idea and it can be used, but not in this manner. The test above would fail with an error:</p>\r\n<pre><code class=\"lang-plaintext\">My Fixture\r\n × Hide element\r\n\r\n   1) An error occurred in ClientFunction code:\r\n\r\n      ReferenceError: elementId is not defined\r\n</code></pre><p>On the surface, your JavaScript programming experience may tell you that the test is fine. Let’s look into TestCafe’s underlying mechanisms in greater detail to see why the test fails.</p>\r\n<h3 id=\"under-the-hood__$\"><a class=\"anchor-fix\" href=\"#under-the-hood\" id=\"under-the-hood\"></a>Under the Hood<a class=\"anchor-hash\" href=\"#under-the-hood\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<p>The TestCafe framework is based on a client-server architecture. The test code runs in a Node.js process (server) and uses a proxy server to interact with the browser (client).</p>\r\n<p><img src=\"/images/testcafe-nodejs-process.svg\" alt=\"TestCafe's client-server architecture\"></p>\r\n<p>Considering this fact, you can expect that:</p>\r\n<ul>\r\n<li>The test code has no direct access to the browser context.</li>\r\n<li>TestCafe interacts with the browser asynchronously (which is why missing <code>await</code> issues are often posted in GitHub and StackOverflow).</li>\r\n<li>The server-side TestCafe process and the client-side browser can only exchange serialized data.</li>\r\n</ul>\r\n<p>We can simplify TestCafe’s client-server interactions as follows:</p>\r\n<ul>\r\n<li>On the server, the TestCafe API exposes methods that execute actions and user code in the browser. When the API is triggered, TestCafe creates commands and passes them to the proxy: TestCafe Hammerhead.  </li>\r\n<li>TestCafe Hammerhead transmits commands from the server to the browser and sends back the results when they are ready.</li>\r\n<li>On the client, TestCafe scripts receive these commands and execute them in the same way the browser handles user actions.</li>\r\n</ul>\r\n<h3 id=\"pass-variables-to-client-functions__$\"><a class=\"anchor-fix\" href=\"#pass-variables-to-client-functions\" id=\"pass-variables-to-client-functions\"></a>Pass Variables to Client Functions<a class=\"anchor-hash\" href=\"#pass-variables-to-client-functions\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<p><em>Create parameterized functions or use page model properties on the client side.</em></p>\r\n<p>Let’s get back to our code that tries and fails to introduce a variable.</p>\r\n<pre><code class=\"lang-js\">test(&#39;Hide element&#39;, async t =&gt; {\r\n    const elementId = &#39;#id&#39;;  \r\n    const hideElement = ClientFunction(() =&gt; {\r\n        document.querySelector(elementId).style.display = &#39;none&#39;;\r\n    });\r\n  \r\n    await hideElement();\r\n  \r\n    await t.expect(Selector(elementId).visible).notOk();\r\n});\r\n</code></pre><p>This function has to be executed in the browser. As we mentioned earlier, only serialized data can travel between the client and the server. This is why TestCafe serializes this function (i.e., converts it to a string). This string is then evaluated when received on the browser side. You can now see why closures do not work for client functions.</p>\r\n<p>What’s the solution then? Before TestCafe converts the function to a string, a separate serializer module processes arguments passed to <code>ClientFunction()</code>. This is the same module that serializes all data that travel between the client and the server. This means that you can easily pass parameters to the client function and they arrive safely.</p>\r\n<p>In addition, you can also find the <code>dependencies</code> property among the options that can be passed to the <a class=\"xref\" href=\"/documentation/402789/reference/test-api/clientfunction/constructor\">ClientFunction</a> constructor.</p>\r\n<p>TestCafe offers two options to access variables declared in test code.</p>\r\n<p>The first option is to pass the variable as an argument:</p>\r\n<pre><code class=\"lang-js\">test(&#39;Hide element&#39;, async t =&gt; {\r\n    const elementId = &#39;#id&#39;;\r\n  \r\n    const hideElement = ClientFunction(targetId =&gt; {\r\n        document.querySelector(targetId).style.display = &#39;none&#39;;\r\n    });\r\n  \r\n    await hideElement(elementId);\r\n  \r\n    await t.expect(Selector(elementId).visible).notOk();\r\n});\r\n</code></pre><p>But what if the element has no ID, so that it’s not easy to find in the DOM tree? The second option is to pass a selector to the client function. Use the <code>dependencies</code> option in the <a class=\"xref\" href=\"/documentation/402789/reference/test-api/clientfunction/constructor\">ClientFunction</a> constructor:</p>\r\n<pre><code class=\"lang-js\">test(&#39;Hide element&#39;, async t =&gt; {\r\n    const elementSelector = Selector(&#39;#populate&#39;);\r\n  \r\n    const hideElement = ClientFunction(() =&gt; {\r\n        elementSelector().style.display = &#39;none&#39;;\r\n    }, { dependencies: { elementSelector } });\r\n  \r\n    await hideElement();\r\n  \r\n    await t.expect(elementSelector.visible).notOk();\r\n});\r\n</code></pre><p>Note that client functions and selectors have a lot in common. Methods that create and run selectors derive from similar methods of client functions. To execute a complex selector query, you can pass a function to the <a class=\"xref\" href=\"/documentation/402756/reference/test-api/selector/constructor\">Selector</a> constructor, as you do for client functions. The main difference between them is the return type. Selectors should return <code>DOMNode</code>, while client functions should return any serializable value, or a Promise that resolves to such value.</p>\r\n<h3 id=\"wait-for-a-custom-condition__$\"><a class=\"anchor-fix\" href=\"#wait-for-a-custom-condition\" id=\"wait-for-a-custom-condition\"></a>Wait for a Custom Condition<a class=\"anchor-hash\" href=\"#wait-for-a-custom-condition\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<p><em>You can specify when TestCafe considers a page loaded.</em></p>\r\n<p>Now let’s see why you may want a client function to return a Promise.</p>\r\n<p>TestCafe is designed to wait for the <code>DOMContentLoaded</code> and <code>load</code> events, as well as XHR requests (allowing three seconds for the latter), before tests begin. In rare instances, the wait time may be over before all scripts on the page are initialized. The following client function pauses the test until a custom condition is fulfilled (you can replace it with your own script completion indicator).</p>\r\n<pre><code class=\"lang-js\">test(&#39;Wait for scripts&#39;, async t =&gt; {\r\n    const waitForScripts = ClientFunction(waitTimeout =&gt; {\r\n        function checkCondition () {\r\n            // Replace this line with a custom condition.\r\n            return true;\r\n        }\r\n\r\n        return new Promise((resolve, reject) =&gt; {\r\n            var timeout, interval;\r\n\r\n            timeout = setTimeout(() =&gt; {\r\n                clearInterval(interval);\r\n                reject(&#39;Timeout is exceeded.&#39;);\r\n            }, waitTimeout);\r\n\r\n            interval = setInterval(() =&gt; {\r\n                if (checkCondition()) {\r\n                    clearTimeout(timeout);\r\n                    clearInterval(interval);\r\n                    resolve();\r\n                }\r\n            }, 100);\r\n        });\r\n    });\r\n\r\n    await waitForScripts(2000);\r\n});\r\n</code></pre><p>Even if a browser does not support Promises, this client function still works because TestCafe automatically adds the necessary polyfills when it processes this code.</p>\r\n<h2 id=\"inject-scripts-to-add-code-permanently__$\"><a class=\"anchor-fix\" href=\"#inject-scripts-to-add-code-permanently\" id=\"inject-scripts-to-add-code-permanently\"></a>Inject Scripts to Add Code Permanently<a class=\"anchor-hash\" href=\"#inject-scripts-to-add-code-permanently\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h2>\r\n<p>Client functions are useful to interact with the tested page when necessary. You can even run a client function without saving it to a variable. However, everything you change in this function on the tested page is reverted once a redirect or page reload occurs. To modify the page permanently, inject client scripts into the tested page. The injected scripts are added to the <code>&lt;head&gt;</code> tag.</p>\r\n<h3 id=\"scripts-that-persist-throughout-testing__$\"><a class=\"anchor-fix\" href=\"#scripts-that-persist-throughout-testing\" id=\"scripts-that-persist-throughout-testing\"></a>Scripts that Persist Throughout Testing<a class=\"anchor-hash\" href=\"#scripts-that-persist-throughout-testing\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<p>Should you need to hide a banner, or modify an attribute for some element, you can organize client code that does it in a separate file:</p>\r\n<p><strong>script.js</strong></p>\r\n<pre><code class=\"lang-js\">window.addEventListener(&#39;DOMContentLoaded&#39;, function () {\r\n    const element = document.querySelector(&#39;your-selector&#39;);\r\n\r\n    element.setAttribute(&#39;foo-bar&#39;, &#39;baz&#39;);\r\n});\r\n</code></pre><p>Next, use your favorite API to attach this file in all tests (which eliminates repetitive <a class=\"xref\" href=\"/documentation/402784/reference/test-api/fixture/beforeeach\">beforeEach</a> hooks):</p>\r\n<p><em>Command Line Interface</em></p>\r\n<pre><code class=\"lang-sh\">testcafe chrome test.js --client-scripts script.js\r\n</code></pre><p><em>API</em></p>\r\n<pre><code class=\"lang-js\">runner.clientScripts(&#39;script.js&#39;);\r\n</code></pre><p><em>Configuration file</em></p>\r\n<pre><code class=\"lang-json\">{  \r\n    &quot;clientScripts&quot;: &quot;script.js&quot;\r\n}\r\n</code></pre><h3 id=\"injected-scripts-run-first__$\"><a class=\"anchor-fix\" href=\"#injected-scripts-run-first\" id=\"injected-scripts-run-first\"></a>Injected Scripts Run First<a class=\"anchor-hash\" href=\"#injected-scripts-run-first\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<p>TestCafe adds the injected scripts to its automation code, so that they run before any other script on the page. You can therefore use injected scripts to alter the page behavior. For instance, you can override the <code>window.open</code> method for all tests as follows:</p>\r\n<pre><code class=\"lang-js\">const mockWindowOpen = &quot;window.open = function () { };&quot;;\r\n\r\nfixture`My App`\r\n    .page`https://devexpress.github.io/testcafe/example/`\r\n    .clientScripts({ content: mockWindowOpen });\r\n\r\ntest(&#39;My test 1&#39;, async t =&gt; { /* ... */ });\r\ntest(&#39;My test 2&#39;, async t =&gt; { /* ... */ });\r\n</code></pre><p>Your code remains almost unchanged. TestCafe only wraps it to catch exceptions.</p>\r\n<h3 id=\"checking-other-head-scripts-for-errors__$\"><a class=\"anchor-fix\" href=\"#checking-other-head-scripts-for-errors\" id=\"checking-other-head-scripts-for-errors\"></a>Checking Other &lt;head> Scripts for Errors<a class=\"anchor-hash\" href=\"#checking-other-head-scripts-for-errors\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<p>Due to their location inside the <code>&lt;head&gt;</code> tags, injected scripts also allow you to access information that is not obtainable by other means.</p>\r\n<p>Consider a scenario where you need to obtain unhandled exceptions thrown in another script in the <code>&lt;head&gt;</code> section. The TestCafe API contains the <a class=\"xref\" href=\"/documentation/402700/reference/test-api/testcontroller/getbrowserconsolemessages\">t.getBrowserConsoleMessages</a> method that returns messages printed in the console. However, this method can only access messages posted by the <code>console.log</code>, <code>console.warn</code>, and <code>console.error</code> methods in page code. The <a class=\"xref\" href=\"/documentation/402700/reference/test-api/testcontroller/getbrowserconsolemessages\">t.getBrowserConsoleMessages</a> method does not fetch errors thrown by the browser. You could try to use a client function to catch the exception, but client functions are executed after all <code>&lt;head&gt;</code> scripts are completed.</p>\r\n<p>With script injection, you can add the following code:</p>\r\n<p><strong>script.js</strong></p>\r\n<pre><code class=\"lang-js\">window.unhandledErrors = [];\r\n\r\nwindow.onerror = message =&gt; {\r\n    window.unhandledErrors.push(message);\r\n};\r\n</code></pre><p>In test code, you can create a client function to access messages in <code>window.unhandledErrors</code>:</p>\r\n<pre><code class=\"lang-js\">test(&#39;Get Unhandled Errors&#39;, async t =&gt; {\r\n    const errors = await t.eval(() =&gt; window.unhandledErrors);\r\n    // ...\r\n}).clientScripts(&#39;script.js&#39;);\r\n</code></pre><h2 id=\"conclusion__$\"><a class=\"anchor-fix\" href=\"#conclusion\" id=\"conclusion\"></a>Conclusion<a class=\"anchor-hash\" href=\"#conclusion\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h2>\r\n<p>Client functions and script injection extend TestCafe’s capabilities so that you can interact with the page directly. These features can configure your application at low levels to prepare it for testing, or fetch data about its execution in a custom manner. You can think of even more ways to use client functions and injected scripts. We hope this brief overview of the TestCafe architecture and sample usage scenarios help improve your understanding of these tools so that you can use them more effectively.</p>\r\n<h2 id=\"related-topics__$\"><a class=\"anchor-fix\" href=\"#related-topics\" id=\"related-topics\"></a>Related Topics<a class=\"anchor-hash\" href=\"#related-topics\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h2>\r\n<ul>\r\n<li><a class=\"xref\" href=\"/documentation/402843/guides/advanced-guides/inject-client-scripts\">Inject Client Scripts</a></li>\r\n<li><a class=\"xref\" href=\"/documentation/402832/guides/basic-guides/client-functions\">Obtain Client-Side Info</a></li>\r\n<li><a class=\"xref\" href=\"/documentation/402829/guides/basic-guides/element-selectors\">Select Page Elements</a></li>\r\n</ul>\r\n","headers":[{"title":"Use Client Functions to Run Code in the Browser","tagName":"h2","id":"use-client-functions-to-run-code-in-the-browser","lvl":2},{"title":"Inject Scripts to Add Code Permanently","tagName":"h2","id":"inject-scripts-to-add-code-permanently","lvl":2},{"title":"Conclusion","tagName":"h2","id":"conclusion","lvl":2},{"title":"Related Topics","tagName":"h2","id":"related-topics","lvl":2}],"title":"Client Functions and Script Injection for Page Interaction","schema":null,"author":"Arseniy Rubtsov, Vasily Strelyaev","preview":"<p>You will learn how to run custom JavaScript code on the tested pages, how to use objects like the page model in this code, how to wait for an arbitrary event in the browser, and the fastest way to run a one-liner or an entire JS module.</p>","description":"You will learn how to run custom JavaScript code on the tested pages, how to use objects like the page model in this code, how to wait for an arbitrary event in","published":"2020-11-18"},"topicUid":"402908","headerNav":{"items":[{"name":"TestCafe Studio","id":"TestCafe Studio"},{"name":"Guides","id":"402634","url":"/documentation/402634/guides","headerUrl":"/documentation/402635/guides/overview/getting-started","items":[]},{"name":"API","id":"402632","url":"/documentation/402632/api","items":[]},{"name":"Recipes","id":"402633","url":"/documentation/402633/recipes","items":[]},{"name":"Examples","id":"402637","url":"/documentation/402637/examples"},{"name":"FAQ","id":"403936","url":"/documentation/403936/faq","headerUrl":"/documentation/402636/faq/general-info","items":[]},{"name":"What's New","id":"What's New","url":"/release-notes","href":"/release-notes","items":[]},{"name":"Dashboard Alpha","id":"Dashboard Alpha","items":[]},{"name":"Support","id":"Support","url":"/support","href":"/support"}],"activeItems":[{"name":"What's New","id":"What's New","url":"/release-notes","href":"/release-notes"},{"name":"Blog","id":"What's New/Blog","url":"/resources/team-blog","href":"/resources/team-blog"},{"name":"Client Functions and Script Injection for Page Interaction","id":"402908","url":"/402908/resources/blog/2020-11-18-client-functions-and-script-injection-for-page-interaction"}]},"sidebarNav":{"root":{"name":"What's New","id":"What's New","url":"/release-notes","href":"/release-notes"},"items":[{"name":"Release Notes","id":"What's New/Release Notes","url":"/release-notes","href":"/release-notes","items":[{"name":"Introducing TestCafe Testing Framework","id":"402864","url":"/402864/release-notes/framework/2016-10-17-introducing-testcafe-open-source-testing-framework"},{"name":"TestCafe v0.10.0 Released","id":"402865","url":"/402865/release-notes/framework/2016-11-8-testcafe-v0-10-0-released"},{"name":"TestCafe v0.11.0 Released","id":"402866","url":"/402866/release-notes/framework/2016-12-8-testcafe-v0-11-0-released"},{"name":"TestCafe v0.12.0 Released","id":"402867","url":"/402867/release-notes/framework/2017-1-19-testcafe-v0-12-0-released"},{"name":"TestCafe v0.18.0 Released - Angular Selectors, Using Multiple Reporters, etc","id":"402874","url":"/402874/release-notes/framework/2017-10-10-testcafe-v0-18-0-released"},{"name":"TestCafe v0.13.0 Released","id":"402868","url":"/402868/release-notes/framework/2017-2-16-testcafe-v0-13-0-released"},{"name":"TestCafe v0.14.0 Released","id":"402869","url":"/402869/release-notes/framework/2017-3-28-testcafe-v0-14-0-released"},{"name":"TestCafe v0.15.0 Released","id":"402870","url":"/402870/release-notes/framework/2017-4-26-testcafe-v0-15-0-released"},{"name":"TestCafe v0.16.0 Released","id":"402871","url":"/402871/release-notes/framework/2017-6-13-testcafe-v0-16-0-released"},{"name":"TestCafe v0.17.0 Released - Testing Electron Apps and Concurrent Test Execution","id":"402872","url":"/402872/release-notes/framework/2017-8-2-testcafe-v0-17-0-released"},{"name":"TestCafe v0.18.0-alpha1 Released - Testing in headless Firefox","id":"402873","url":"/402873/release-notes/framework/2017-9-29-testcafe-v0-18-0-alpha1-released"},{"name":"TestCafe v0.19.0 Released - Rapid Test Development Tool, Screenshots of Page Elements, etc","id":"402875","url":"/402875/release-notes/framework/2018-03-01-testcafe-v0-19-0-released"},{"name":"TestCafe v0.20.0 Released","id":"402876","url":"/402876/release-notes/framework/2018-05-15-testcafe-v0-20-0-released"},{"name":"TestCafe v0.21.0 Released","id":"402877","url":"/402877/release-notes/framework/2018-08-02-testcafe-v0-21-0-released"},{"name":"TestCafe v0.22.0 Released","id":"402878","url":"/402878/release-notes/framework/2018-09-03-testcafe-v0-22-0-released"},{"name":"TestCafe v0.23.0 Released","id":"402879","url":"/402879/release-notes/framework/2018-10-25-testcafe-v0-23-0-released"},{"name":"TestCafe v0.23.1 Released","id":"402880","url":"/402880/release-notes/framework/2018-11-7-testcafe-v0-23-1-released"},{"name":"TestCafe v1.6.0 Released","id":"402888","url":"/402888/release-notes/framework/2019-10-16-testcafe-v1-6-0-released"},{"name":"TestCafe v1.7.0 Released","id":"402889","url":"/402889/release-notes/framework/2019-11-21-testcafe-v1-7-0-released"},{"name":"TestCafe v1.1.0 Released","id":"402883","url":"/402883/release-notes/framework/2019-2-28-testcafe-v1-1-0-released"},{"name":"Migration from TestCafe v0.x.y to v1.0.0","id":"402881","url":"/402881/release-notes/framework/2019-2-7-migration-from-testcafe-v0-x-y-to-v1-0-0"},{"name":"TestCafe v1.0.0 Released","id":"402882","url":"/402882/release-notes/framework/2019-2-7-testcafe-v1-0-0-released"},{"name":"TestCafe v1.3.0 Released","id":"402884","url":"/402884/release-notes/framework/2019-7-2-testcafe-v1-3-0-released"},{"name":"TestCafe v1.3.1 Released","id":"402885","url":"/402885/release-notes/framework/2019-7-5-testcafe-v1-3-1-released"},{"name":"TestCafe v1.4.0 Released","id":"402886","url":"/402886/release-notes/framework/2019-8-7-testcafe-v1-4-0-released"},{"name":"TestCafe v1.5.0 Released","id":"402887","url":"/402887/release-notes/framework/2019-9-12-testcafe-v1-5-0-released"},{"name":"TestCafe v1.9.0 Released","id":"402891","url":"/402891/release-notes/framework/2020-08-06-testcafe-v1-9-0-released"},{"name":"TestCafe v1.8.0 Released","id":"402890","url":"/402890/release-notes/framework/2020-1-17-testcafe-v1-8-0-released"},{"name":"v1.10.0: New Compiler Options API, Resize and Screenshot Support for Child Windows","id":"402892","url":"/402892/release-notes/framework/2020-12-15-v1-10-0-new-compiler-options-api-resize-and-screenshot-support-for-child-windows"},{"name":"TestCafe v1.11.0 Released","id":"402964","url":"/402964/release-notes/framework/2021-2-15-testcafe-v1-11-0-released"},{"name":"TestCafe v1.12.0 Released","id":"402966","url":"/402966/release-notes/framework/2021-03-03-testcafe-v1-12-0-released"},{"name":"TestCafe v1.13.0 Released","id":"403063","url":"/403063/release-notes/framework/2021-3-22-testcafe-v1-13-0-released"},{"name":"TestCafe v1.14.0 Released","id":"403064","url":"/403064/release-notes/framework/2021-4-7-testcafe-v1-14-0-released"},{"name":"TestCafe v1.15.0 Released","id":"403220","url":"/403220/release-notes/framework/2021-7-8-testcafe-v1-15-0-released"},{"name":"TestCafe v1.16.0 Released","id":"403403","url":"/403403/release-notes/framework/2021-9-8-testcafe-v1-16-0-released"},{"name":"TestCafe v1.17.0 Released","id":"403546","url":"/403546/release-notes/framework/2021-10-2-testcafe-v1-17-0-released"},{"name":"TestCafe v1.18.0 Released","id":"403664","url":"/403664/release-notes/framework/2021-12-22-testcafe-v1-18-0-released"},{"name":"TestCafe v1.18.2 Released","id":"403713","url":"/403713/release-notes/framework/2022-01-18-testcafe-v-1-18-2-released"},{"name":"TestCafe v1.19.0 Released","id":"403938","url":"/403938/release-notes/framework/2022-05-26-testcafe-v1-19-0-released"},{"name":"TestCafe v1.20.0 Released","id":"404002","url":"/404002/release-notes/framework/2022-7-18-testcafe-v1-20-0-released"},{"name":"TestCafe v1.20.1 Released","id":"404029","url":"/404029/release-notes/framework/2022-8-8-testcafe-v-1-20-1-released"},{"name":"TestCafe v2.0.0 Released","id":"404018","url":"/404018/release-notes/framework/2022-8-31-testcafe-v2-0-0-released"},{"name":"TestCafe v2.1.0 Released","id":"404168","url":"/404168/release-notes/framework/2022-11-10-testcafe-v2-1-0-released"},{"name":"TestCafe v2.2.0 Released","id":"404236","url":"/404236/release-notes/framework/2022-12-29-testcafe-v2-2-0-released"},{"name":"TestCafe v2.3.0 Released","id":"404257","url":"/404257/release-notes/framework/2023-1-30-testcafe-v2-3-0-released"},{"name":"TestCafe v2.4.0 Released","id":"404319","url":"/404319/release-notes/framework/2023-3-7-testcafe-v2-4-0-released"},{"name":"TestCafe v2.5.0 Released","id":"404349","url":"/404349/release-notes/framework/2023-4-6-testcafe-v2-5-0-released"},{"name":"TestCafe v2.6.0 Released","id":"404399","url":"/404399/release-notes/framework/2023-5-11-testcafe-v2-6-0-released"},{"name":"TestCafe v2.6.1 Released","id":"404427","url":"/404427/release-notes/framework/2023-5-29-testcafe-v2-6-1-released"},{"name":"Introducing TestCafe v3.0.0","id":"404438","url":"/404438/release-notes/framework/2023-6-21-introducing-testcafe-v-3-0-0"},{"name":"TestCafe v3.1.0 Released","id":"404468","url":"/404468/release-notes/framework/2023-7-27-testcafe-v-3-1-0-released"},{"name":"TestCafe v3.2.0 Released","id":"404492","url":"/404492/release-notes/framework/2023-08-17-testcafe-v3-2-0-released"},{"name":"TestCafe v3.3.0 Released","id":"404515","url":"/404515/release-notes/framework/2023-08-29-testcafe-v3-3-0-released"}]},{"name":"Blog","id":"What's New/Blog","url":"/resources/team-blog","href":"/resources/team-blog","items":[{"name":"The Fastest Way to Your Next Test – TestCafe + TestCafe Studio - Q&As","id":"402902","url":"/402902/resources/blog/2020-09-24-the-fastest-way-to-your-next-test-qa"},{"name":"Upcoming Webinar: How to Get True Cross-Browser Test Coverage with TestCafe and LambdaTest","id":"402903","url":"/402903/resources/blog/2020-11-17-upcoming-webinar-how-to-get-true-cross-browser-test-coverage-with-testcafe-and-lambdatest"},{"name":"Client Functions and Script Injection for Page Interaction","id":"402908","url":"/402908/resources/blog/2020-11-18-client-functions-and-script-injection-for-page-interaction"},{"name":"Webinar Recording: How to Get True Cross-Browser Test Coverage with TestCafe and LambdaTest","id":"402906","url":"/402906/resources/blog/2020-12-11-webinar-recording-how-to-get-true-cross-browser-test-coverage-with-testcafe-and-lambdatest"},{"name":"Randomize Your End-to-End Tests: How to Generate Input Data for TestCafe","id":"402905","url":"/402905/resources/blog/2020-12-28-randomize-your-end-to-end-tests-how-to-generate-input-data-for-testcafe"},{"name":"How to Scroll Web Pages Using TestCafe","id":"402893","url":"/402893/resources/blog/2020-4-20-how-to-scroll-web-pages-using-testcafe"},{"name":"How to Debug Tests in TestCafe: Quick Guide","id":"402894","url":"/402894/resources/blog/2020-5-25-how-to-debug-tests-in-testcafe-quick-guide"},{"name":"How to Speed up Debugging in TestCafe: Tips and Tricks","id":"402895","url":"/402895/resources/blog/2020-6-30-how-to-speed-up-debugging-in-testcafe-tips-and-tricks"},{"name":"Upcoming Webinar: 10 Ways to Simplify Your UI Testing","id":"402896","url":"/402896/resources/blog/2020-7-14-10-ways-to-simplify-your-ui-testing"},{"name":"Introducing the TestCafe Jenkins Plugin","id":"402897","url":"/402897/resources/blog/2020-7-29-introducing-the-testcafe-jenkins-plugin"},{"name":"TestCafe Webinar - Your Questions Answered","id":"402898","url":"/402898/resources/blog/2020-8-19-testcafe-webinar-your-questions-answered"},{"name":"Upcoming Webinar: The Fastest Way to Your Next Test – TestCafe + TestCafe Studio","id":"402899","url":"/402899/resources/blog/2020-8-21-the-fastest-way-to-your-next-test"},{"name":"Introducing Multi-window Tests (Beta)","id":"402900","url":"/402900/resources/blog/2020-8-26-introducing-multi-window-tests-beta"},{"name":"How TestCafe Can Help You to Deliver Faster","id":"402901","url":"/402901/resources/blog/2020-9-3-how-testcafe-can-help-you-to-deliver-faster"},{"name":"Upcoming Roundtable: Modern Web Testing with TestCafe","id":"402904","url":"/402904/resources/blog/2021-2-9-modern-web-testing-with-testcafe"},{"name":"Nächste Woche: Deutscher Live-Stream zu TestCafe mit Gregor Biswanger","id":"403292","url":"/403292/resources/blog/2021-7-14-naechste-woche-deutscher-live-stream"},{"name":"Case study: How Medinas started deploying every day by using TestCafe","id":"403422","url":"/403422/resources/blog/2021-9-22-how-medinas-started-deploying-every-day"},{"name":"TestCafe Dashboard (Alpha): Be the First to Explore its Capabilities","id":"403442","url":"/403442/resources/blog/2021-10-7-dashboard-alpha-invitation-announce"},{"name":"Case study: How Neos CMS Increased Reliability and Confidence with E2E testing and TestCafe","id":"403571","url":"/403571/resources/blog/2021-11-17-how-neos-cms-increased-reliability-and-confidence-with-e2e-testing-and-testcafe"},{"name":"The 2022 TestCafe Survey: Let us know what you think!","id":"404008","url":"/404008/resources/blog/2022-7-12-2022-testcafe-survey-let-us-know-what-you-think"},{"name":"From TestCafe 1.0 to TestCafe 2.0: 11 Most Notable Enhancements","id":"404059","url":"/404059/resources/blog/2022-8-31-from-testcafe-10-to-testcafe-20-11-most-notable-enhancements"},{"name":"Case study: SurveyJS — Test-Driven Development with TestCafe","id":"404146","url":"/404146/resources/blog/2022-11-01-surveyjs-case-study"},{"name":"TestCafe Goes Native","id":"404431","url":"/404431/resources/blog/2023-6-21-testcafe-goes-native"}]},{"name":"Community Blogs","id":"What's New/Community Blogs","url":"/resources/community-blogs","href":"/resources/community-blogs"},{"name":"Courses","id":"What's New/Courses","url":"/resources/courses","href":"/resources/courses"},{"name":"Books","id":"What's New/Books","url":"/resources/books","href":"/resources/books"}],"activeItems":[{"name":"What's New","id":"What's New","url":"/release-notes","href":"/release-notes"},{"name":"Blog","id":"What's New/Blog","url":"/resources/team-blog","href":"/resources/team-blog"},{"name":"Client Functions and Script Injection for Page Interaction","id":"402908","url":"/402908/resources/blog/2020-11-18-client-functions-and-script-injection-for-page-interaction"}],"showLeafs":true},"breadcrumbsNav":[{"name":"What's New","id":"What's New","url":"/release-notes","href":"/release-notes"},{"name":"Blog","id":"What's New/Blog","url":"/resources/team-blog","href":"/resources/team-blog"},{"name":"Client Functions and Script Injection for Page Interaction","id":"402908","url":"/402908/resources/blog/2020-11-18-client-functions-and-script-injection-for-page-interaction"}],"publishDates":{"teamBlog":[1687305600000,1667260800000,1661904000000,1657584000000,1637107200000,1633564800000,1632268800000,1626220800000,1612828800000,1609113600000,1607644800000,1605657600000,1605571200000,1600905600000,1599091200000,1598400000000,1597968000000,1597795200000,1595980800000,1594684800000,1593475200000,1590364800000,1587340800000],"releaseNotes":[1693267200000,1692230400000,1690416000000,1687305600000,1685318400000,1683763200000,1680739200000,1678147200000,1675036800000,1672272000000,1668038400000,1661904000000,1659916800000,1658102400000,1653523200000,1642464000000,1640131200000,1633132800000,1631059200000,1625702400000,1617753600000,1616371200000,1614729600000,1613347200000,1607990400000,1596672000000,1579219200000,1574294400000,1571184000000,1568246400000,1565136000000,1562284800000,1562025600000,1551312000000,1549497600000,1549497600000,1541548800000,1540425600000,1535932800000,1533168000000,1526342400000,1519862400000,1507593600000,1506643200000,1501632000000,1497312000000,1493164800000,1490659200000,1487203200000,1484784000000,1481155200000,1478563200000,1476662400000]}},"__N_SSG":true}
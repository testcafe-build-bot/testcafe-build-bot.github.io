{"pageProps":{"content":{"html":"        <h1>Authentication and Roles</h1>\r\n\r\n<p>You can use regular TestCafe actions to log users in and out:</p>\r\n<pre><code class=\"lang-js\">test(&#39;log-in and do stuff&#39;, async t =&gt; {\r\n    await t\r\n        .typeText(&#39;#email&#39;, &#39;example@example.com&#39;)\r\n        .typeText(&#39;#password&#39;, &#39;myPassw0rd&#39;)\r\n        .click(&#39;button[title=&quot;Log In&quot;]&#39;);\r\n        // the test continues\r\n});\r\n</code></pre><p>As your test suite grows, you might prefer to use <a href=\"#user-roles\"><strong>User Roles</strong></a> — an easier way to manage user authentication. </p>\r\n<p>TestCafe includes dedicated methods for <a href=\"#http-authentication\">HTTP Basic and Windows (NTLM)</a> authentication. Read the corresponding section for more information.</p>\r\n<ul>\r\n<li><a href=\"#user-roles\">User Roles</a><ul>\r\n<li><a href=\"#quick-guide\">Quick Guide</a></li>\r\n<li><a href=\"#why-use-roles\">Why use Roles</a></li>\r\n<li><a href=\"#how-roles-work\">How Roles Work</a></li>\r\n<li><a href=\"#create-roles\">Create Roles</a></li>\r\n<li><a href=\"#activate-roles\">Activate Roles</a></li>\r\n<li><a href=\"#log-out\">Log-out</a></li>\r\n<li><a href=\"#role-limitations\">Role limitations</a><ul>\r\n<li><a href=\"#failed-logins\">Failed logins</a></li>\r\n</ul>\r\n</li>\r\n</ul>\r\n</li>\r\n<li><a href=\"#http-authentication\">HTTP Authentication</a></li>\r\n<li><a href=\"#troubleshooting\">Troubleshooting</a></li>\r\n</ul>\r\n<h2 id=\"user-roles__$\"><a class=\"anchor-fix\" href=\"#user-roles\" id=\"user-roles\"></a>User Roles<a class=\"anchor-hash\" href=\"#user-roles\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h2>\r\n<p>Use Roles to log users in and out with a single line of code.</p>\r\n<h3 id=\"quick-guide__$\"><a class=\"anchor-fix\" href=\"#quick-guide\" id=\"quick-guide\"></a>Quick Guide<a class=\"anchor-hash\" href=\"#quick-guide\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<ol>\r\n<li>Create a <code>Role</code> definition with authentication actions.</li>\r\n</ol>\r\n<pre><code class=\"lang-js\">import { Role } from &#39;testcafe&#39;;\r\n\r\nconst userOne = Role(&#39;http://example.com/login&#39;, async t =&gt; {\r\n    await t\r\n        .typeText(&#39;#login&#39;, &#39;TestUser&#39;)\r\n        .typeText(&#39;#password&#39;, &#39;testpass&#39;)\r\n        .click(&#39;#sign-in&#39;);\r\n});\r\n</code></pre><p>See: <a href=\"#create-roles\">Create Roles</a></p>\r\n<ol start=\"2\">\r\n<li>Call the <code>t.useRole</code> method to activate a Role, and log the user in.</li>\r\n</ol>\r\n<pre><code class=\"lang-js\">    await t.useRole(userOne)\r\n</code></pre><p>See: <a href=\"#activate-roles\">Activate Roles</a></p>\r\n<ol start=\"3\">\r\n<li><em>Optional.</em> Activate another Role (for example, the built-in <a href=\"#log-out\">Anonymous Role</a>) to log the user out.</li>\r\n</ol>\r\n<pre><code class=\"lang-js\">   await t.useRole(Role.anonymous());\r\n</code></pre><p>See: <a href=\"#log-out\">Log out</a></p>\r\n<h3 id=\"why-use-roles__$\"><a class=\"anchor-fix\" href=\"#why-use-roles\" id=\"why-use-roles\"></a>Why use Roles<a class=\"anchor-hash\" href=\"#why-use-roles\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<ul>\r\n<li><strong>Ease of use.</strong> Switch between user accounts with a single method call.</li>\r\n<li><strong>Cleaner code.</strong> Role definitions let you separate authentication logic from the rest of code. This makes your test suite easier to maintain.</li>\r\n<li><strong>Faster test execution.</strong> TestCafe only executes the log-in routine once in each of the browsers you open. During subsequent Role activations, TestCafe re-uses Role authentication data (cookies and other artifacts) to <a href=\"#how-roles-work\">instantly</a> log users in and out.</li>\r\n<li><strong>One Role for many websites.</strong> The active Role saves <em>all</em> the authentication data that the browser receives. You can enable a Role, and then log into as many websites as you want. When you next activate that Role, you’ll log back into all these websites.</li>\r\n<li><strong>Seamless authentication.</strong> Login actions do not interrupt your test scenario. When TestCafe activates a Role, it automatically navigates to the log-in page, and goes back when the log-in process is complete. The <a class=\"xref\" href=\"/documentation/402760/reference/test-api/role/constructor#optionspreserveurl\">preserveUrl</a> option disables this behavior.</li>\r\n<li><strong>No manual log-outs.</strong> TestCafe automatically empties authentication data cache when you switch to a new Role. Activate the Anonymous Role to log everyone out.</li>\r\n<li><strong>Object-based API.</strong> Role objects store both the authentication data and the associated logic. You can access these objects anywhere in code.</li>\r\n</ul>\r\n<p>Authentication solutions that rely on <a class=\"xref\" href=\"/documentation/402826/guides/best-practices/page-model\">page models</a> and <a class=\"xref\" href=\"/documentation/402803/recipes/best-practices/create-helpers\">helper functions</a> do not offer such advanced capabilities.</p>\r\n<h3 id=\"how-roles-work__$\"><a class=\"anchor-fix\" href=\"#how-roles-work\" id=\"how-roles-work\"></a>How Roles Work<a class=\"anchor-hash\" href=\"#how-roles-work\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<p>TestCafe only executes log-in routines once per browser per test run. During subsequent Role activations, TestCafe does not perform authentication actions — it just retrieves the authentication data.</p>\r\n<p>While the Role is active, TestCafe saves the authentication data from <em>cookie storage</em>, <em>localStorage</em>, and <em>sessionStorage</em> to the active Role object. If your web application stores authentication data elsewhere, TestCafe cannot save it.</p>\r\n<p>TestCafe does not limit the amount of authentication data that a single Role can store. If you activate a Role, and then log into multiple websites, that Role will store <em>all</em> the authentication data that the browser receives. Subsequent Role activations will log you into multiple websites.</p>\r\n<h3 id=\"create-roles__$\"><a class=\"anchor-fix\" href=\"#create-roles\" id=\"create-roles\"></a>Create Roles<a class=\"anchor-hash\" href=\"#create-roles\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<p>The <a class=\"xref\" href=\"/documentation/402760/reference/test-api/role/constructor\">Role</a> constructor creates Roles. It takes two arguments: the <em>absolute</em> URL of the log-in page, and an asynchronous function with sign-in <a class=\"xref\" href=\"/documentation/402833/guides/basic-guides/test-actions\">actions</a>.</p>\r\n<div class=\"IMPORTANT\"><p class=\"alert-title\">Important</p><p>The <code>Role</code> constructor does not accept relative URLs as arguments.</p>\r\n</div>\r\n<pre><code class=\"lang-js\">import { Role } from &#39;testcafe&#39;;\r\n\r\nconst userOne = Role(&#39;http://example.com/login&#39;, async t =&gt; {\r\n    await t\r\n        .typeText(&#39;#login&#39;, &#39;TestUser&#39;)\r\n        .typeText(&#39;#password&#39;, &#39;testpass&#39;)\r\n        .click(&#39;#sign-in&#39;);\r\n});\r\n</code></pre><p>You can share Roles across tests and fixtures. Define Roles in a separate helper file, and use them in any test fixture that references this file.</p>\r\n<h3 id=\"activate-roles__$\"><a class=\"anchor-fix\" href=\"#activate-roles\" id=\"activate-roles\"></a>Activate Roles<a class=\"anchor-hash\" href=\"#activate-roles\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<p>You can activate Roles anywhere in the test <em>body</em>. Role definitions <em>cannot contain</em> Role activations. To activate a role, use the <a class=\"xref\" href=\"/documentation/402673/reference/test-api/testcontroller/userole\">t.useRole</a> method. </p>\r\n<p>The first time you activate a role, TestCafe navigates to the login page and executes login actions. When the authentication is complete, TestCafe goes back to the page that was open before Role activation. Use the <a class=\"xref\" href=\"/documentation/402760/reference/test-api/role/constructor#optionspreserveurl\">preserveUrl</a> option to disable this behavior.</p>\r\n<p>When you activate a role for the second time, TestCafe does not navigate to the login page. It just loads the Role authentication data and refreshes the current page. See: <a href=\"#how-roles-work\">How Roles Work</a></p>\r\n<pre><code class=\"lang-js\">import { Selector } from &#39;testcafe&#39;;\r\n\r\nfixture `My Fixture`\r\n    .page `http://example.com`;\r\n\r\ntest(&#39;test with two users&#39;, async t =&gt; {\r\n    await t\r\n        .useRole(regularUser)\r\n        .click(&#39;#delete-button&#39;)\r\n        .useRole(administrator)\r\n        .click(&#39;#delete-button&#39;);\r\n});\r\n</code></pre><p>We recommend that you activate Roles within <a class=\"xref\" href=\"/documentation/403435/guides/intermediate-guides/hooks\">before and beforeEach</a> hooks. That way, TestCafe gathers Role authentication data at the very beginning of the test suite, and all subsequent activations happen instantaneously.</p>\r\n<h3 id=\"log-out__$\"><a class=\"anchor-fix\" href=\"#log-out\" id=\"log-out\"></a>Log out<a class=\"anchor-hash\" href=\"#log-out\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<p>You don’t need to add log-out actions to your tests. The Anonymous role empties the authentication data storage, and logs you out of all websites. To activate the Anonymous role, pass the <a class=\"xref\" href=\"/documentation/402761/reference/test-api/role/anonymous\">Role.anonymous()</a> function to the <code>useRole</code> method.</p>\r\n<pre><code class=\"lang-js\">import { Selector, Role } from &#39;testcafe&#39;;\r\n\r\nfixture `My Fixture`;\r\n\r\ntest(&#39;Anonymous users can view new comments&#39;, async t =&gt; {\r\n    await t\r\n        .useRole(registeredUser)\r\n        .navigateTo(&#39;http://example.org&#39;)\r\n        .typeText(&#39;#comment&#39;, &#39;Hey ya!&#39;)\r\n        .click(&#39;#submit&#39;)\r\n        .useRole(Role.anonymous());\r\n\r\n    const comment = await Selector(&#39;#comment-data&#39;);\r\n\r\n    await t.expect(comment.innerText).eql(&#39;Hey ya!&#39;);\r\n});\r\n</code></pre><h3 id=\"role-limitations__$\"><a class=\"anchor-fix\" href=\"#role-limitations\" id=\"role-limitations\"></a>Role limitations<a class=\"anchor-hash\" href=\"#role-limitations\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<ul>\r\n<li><p>TestCafe does not share Role authentication data between browsers.</p>\r\n</li>\r\n<li><p>TestCafe does not share Role authentication data between different test runs. TestCafe empties the authentication data storage when the test run ends. The next time you run TestCafe and activate a Role, TestCafe repeats the authentication process.</p>\r\n</li>\r\n<li><p>Roles remain active until the user activates a different Role, or the test ends. To continue using the same Role in the next test, you need to activate it again.</p>\r\n</li>\r\n<li><p>The active Role saves <em>all</em> the authentication data that the browser receives. You can enable a Role, and then log into <em>as many websites as you want</em>. When you next activate that Role, you’ll log back into all these websites. For instance, imagine that Role A contains authentication code for website #1. If you enable it, and then log into website #2, Role A will save authentication data for both websites. </p>\r\n</li>\r\n</ul>\r\n<h4 id=\"failed-logins__$\"><a class=\"anchor-fix\" href=\"#failed-logins\" id=\"failed-logins\"></a>Failed logins<a class=\"anchor-hash\" href=\"#failed-logins\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h4>\r\n<p>Don’t use Roles to deliberately enter invalid login information. If you want to test an application’s response to login failure, add log-in actions to the test body.</p>\r\n<p>Roles simply save and load authentication data. They cannot confirm the presence or the validity of authentication data. If your log-in fails and you receive no cookies, subsequent Role activations will not authenticate the user and will yield test errors.</p>\r\n<h2 id=\"http-authentication__$\"><a class=\"anchor-fix\" href=\"#http-authentication\" id=\"http-authentication\"></a>HTTP Authentication<a class=\"anchor-hash\" href=\"#http-authentication\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h2>\r\n<div class=\"IMPORTANT\"><p class=\"alert-title\">Important</p><p>When TestCafe uses <a class=\"xref\" href=\"/documentation/404237/guides/intermediate-guides/native-automation-mode\">native automation</a>, it cannot authenticate users with the NTLM protocol.</p>\r\n</div>\r\n<p>TestCafe can open web pages that require HTTP <a href=\"https://en.wikipedia.org/wiki/Basic_access_authentication\" target=\"_blank\">Basic<span class=\"svg-no-wrap\">&#65279;<svg fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\"></path></svg></span></a> and <a href=\"https://en.wikipedia.org/wiki/Integrated_Windows_Authentication\" target=\"_blank\">Windows (NTLM)<span class=\"svg-no-wrap\">&#65279;<svg fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\"></path></svg></span></a> authentication. </p>\r\n<p>Use the <a class=\"xref\" href=\"/documentation/402735/reference/test-api/test/httpauth\">test.httpAuth</a> method to specify credentials for each test, and the <a class=\"xref\" href=\"/documentation/402781/reference/test-api/fixture/httpauth\">fixture.httpAuth</a> method to specify credentials for the entire fixture.</p>\r\n<blockquote><p>Browsers do not display native browser authentication prompts when TestCafe authenticates the user. </p>\r\n</blockquote>\r\n<pre><code class=\"lang-js\">fixture `My fixture`\r\n    .page `http://example.com`\r\n    .httpAuth({\r\n        username: &#39;username&#39;,\r\n        password: &#39;Pa$$word&#39;,\r\n\r\n        // Optional parameters; can be required for NTLM authentication.\r\n        domain:      &#39;CORP-DOMAIN&#39;,\r\n        workstation: &#39;machine-win10&#39;\r\n    });\r\n\r\ntest(&#39;Test1&#39;, async t =&gt; {});          // Logs in as username\r\n\r\ntest                                   // Logs in as differentUserName\r\n    .httpAuth({\r\n        username: &#39;differentUserName&#39;,\r\n        password: &#39;differentPa$$word&#39;\r\n    })\r\n    (&#39;Test2&#39;, async t =&gt; {});\r\n</code></pre><h2 id=\"troubleshooting__$\"><a class=\"anchor-fix\" href=\"#troubleshooting\" id=\"troubleshooting\"></a>Troubleshooting<a class=\"anchor-hash\" href=\"#troubleshooting\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h2>\r\n<h3 id=\"test-actions-fail-after-authentication__$\"><a class=\"anchor-fix\" href=\"#test-actions-fail-after-authentication\" id=\"test-actions-fail-after-authentication\"></a>Test Actions Fail After Authentication<a class=\"anchor-hash\" href=\"#test-actions-fail-after-authentication\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"none\"><path d=\"M12.586 2.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2.002 2.002 0 01-3.438-1.407 2 2 0 01.61-1.42l3-3z\" clip-rule=\"evenodd\"></path></svg></a></h3>\r\n<p>Some tests fail when you return to a cached page after a login.</p>\r\n<p>Throughout the test, TestCafe regularly updates client-side automation scripts. Navigation to a cached page that contains outdated automation scripts may break TestCafe. You may also lose authentication data, as well as data from local or session storage.</p>\r\n<p>If tests fail unexpectedly after authentication, try the following:</p>\r\n<ul>\r\n<li>Enable the <a class=\"xref\" href=\"/documentation/402760/reference/test-api/role/constructor#optionspreserveurl\">preserveUrl</a>  option to disable automatic navigation.</li>\r\n<li>If <code>preserveUrl</code> does not fix the issue, disable page caching. Note that this slows down test execution.</li>\r\n</ul>\r\n<p>Use <a class=\"xref\" href=\"/documentation/402782/reference/test-api/fixture/disablepagecaching\">fixture.disablePageCaching</a> or <a class=\"xref\" href=\"/documentation/402736/reference/test-api/test/disablepagecaching\">test.disablePageCaching</a> to disable caching during a fixture or test:</p>\r\n<pre><code class=\"lang-js\">fixture\r\n    .disablePageCaching `My fixture`\r\n    .page `https://example.com`;\r\n</code></pre><pre><code class=\"lang-js\">test\r\n    .disablePageCaching\r\n    (&#39;My test&#39;, async t =&gt; { /* ... */ });\r\n</code></pre><p>To disable page caching during the entire test run, use one of the following options:</p>\r\n<ul>\r\n<li>the <a class=\"xref\" href=\"/documentation/402639/reference/command-line-interface#--disable-page-caching\">--disable-page-caching</a> command line flag, </li>\r\n<li>the <code>disablePageCaching</code> option in the <a class=\"xref\" href=\"/documentation/402655/reference/testcafe-api/runner/run\">runner.run</a> method,</li>\r\n<li>the <a class=\"xref\" href=\"/documentation/402638/reference/configuration-file#disablepagecaching\">disablePageCaching</a> configuration file property.</li>\r\n</ul>\r\n","headers":[{"title":"User Roles","tagName":"h2","id":"user-roles","lvl":2},{"title":"HTTP Authentication","tagName":"h2","id":"http-authentication","lvl":2},{"title":"Troubleshooting","tagName":"h2","id":"troubleshooting","lvl":2}],"title":"Authentication and Roles","schema":null,"author":null,"preview":null,"description":null,"published":null},"topicUid":"402845","headerNav":{"items":[{"name":"TestCafe Studio","id":"TestCafe Studio"},{"name":"Guides","id":"402634","url":"/documentation/402634/guides","headerUrl":"/documentation/402635/guides/overview/getting-started","items":[]},{"name":"API","id":"402632","url":"/documentation/402632/api","items":[]},{"name":"Recipes","id":"402633","url":"/documentation/402633/recipes","items":[]},{"name":"Examples","id":"402637","url":"/documentation/402637/examples"},{"name":"FAQ","id":"403936","url":"/documentation/403936/faq","headerUrl":"/documentation/402636/faq/general-info","items":[]},{"name":"What's New","id":"What's New","url":"/release-notes","href":"/release-notes","items":[]},{"name":"Dashboard Alpha","id":"Dashboard Alpha","items":[]},{"name":"Support","id":"Support","url":"/support","href":"/support"}],"activeItems":[{"name":"Guides","id":"402634","url":"/documentation/402634/guides","headerUrl":"/documentation/402635/guides/overview/getting-started"},{"name":"Intermediate Guides","id":"402634/Intermediate Guides"},{"name":"Authentication and Roles","id":"402845","url":"/documentation/402845/guides/intermediate-guides/authentication"}]},"sidebarNav":{"root":{"name":"Guides","id":"402634","url":"/documentation/402634/guides","headerUrl":"/documentation/402635/guides/overview/getting-started"},"items":[{"name":"Overview","id":"402634/Overview","items":[{"name":"Getting Started","id":"402635","url":"/documentation/402635/guides/overview/getting-started"},{"name":"Why TestCafe?","id":"402631","url":"/documentation/402631/guides/overview/why-testcafe"}]},{"name":"Basic Guides","id":"402634/Basic Guides","items":[{"name":"Install TestCafe","id":"402834","url":"/documentation/402834/guides/basic-guides/install-testcafe"},{"name":"Test Structure","id":"402831","url":"/documentation/402831/guides/basic-guides/test-structure"},{"name":"Element Selectors","id":"402829","url":"/documentation/402829/guides/basic-guides/element-selectors"},{"name":"Test Actions","id":"402833","url":"/documentation/402833/guides/basic-guides/test-actions"},{"name":"Assertions","id":"402837","url":"/documentation/402837/guides/basic-guides/assertions"},{"name":"Client Functions","id":"402832","url":"/documentation/402832/guides/basic-guides/client-functions"},{"name":"Run Tests","id":"402830","url":"/documentation/402830/guides/basic-guides/run-tests"},{"name":"Debug Tests","id":"402835","url":"/documentation/402835/guides/basic-guides/debug-tests"}]},{"name":"Best Practices","id":"402634/Best Practices","items":[{"name":"Best Practices","id":"402836","url":"/documentation/402836/guides/best-practices/best-practices"},{"name":"Speed Up Test Execution","id":"402963","url":"/documentation/402963/guides/best-practices/speed-up-test-execution"},{"name":"Page Model","id":"402826","url":"/documentation/402826/guides/best-practices/page-model"},{"name":"Bootstrap your TestCafe project with create-testcafe","id":"404259","url":"/documentation/404259/guides/best-practices/create-testcafe"}]},{"name":"Intermediate Guides","id":"402634/Intermediate Guides","items":[{"name":"Native Automation FAQ","id":"404237","url":"/documentation/404237/guides/intermediate-guides/native-automation-mode"},{"name":"Browsers","id":"402828","url":"/documentation/402828/guides/intermediate-guides/browsers"},{"name":"Mobile Devices, Cloud Browsers and Emulation","id":"403584","url":"/documentation/403584/guides/intermediate-guides/mobile-devices-cloud-browsers-and-emulation"},{"name":"Visual Selector Debugger","id":"404288","url":"/documentation/404288/guides/intermediate-guides/visual-selector-debugger"},{"name":"Run Tests Concurrently","id":"403626","url":"/documentation/403626/guides/intermediate-guides/run-tests-concurrently"},{"name":"Reporters","id":"402825","url":"/documentation/402825/guides/intermediate-guides/reporters"},{"name":"TypeScript and CoffeeScript","id":"402824","url":"/documentation/402824/guides/intermediate-guides/typescript-and-coffeescript"},{"name":"Authentication and Roles","id":"402845","url":"/documentation/402845/guides/intermediate-guides/authentication"},{"name":"Screenshots and Videos","id":"402840","url":"/documentation/402840/guides/intermediate-guides/screenshots-and-videos"},{"name":"API Testing","id":"403971","url":"/documentation/403971/guides/intermediate-guides/api-testing"},{"name":"Hooks","id":"403435","url":"/documentation/403435/guides/intermediate-guides/hooks"},{"name":"Quarantine Mode","id":"403841","url":"/documentation/403841/guides/intermediate-guides/quarantine-mode"},{"name":"Live Mode","id":"403842","url":"/documentation/403842/guides/intermediate-guides/live-mode"},{"name":"Intercept HTTP Requests","id":"402842","url":"/documentation/402842/guides/intermediate-guides/intercept-http-requests"},{"name":"Metadata and Filtering","id":"403436","url":"/documentation/403436/guides/intermediate-guides/metadata-and-filtering"},{"name":"Multiple Browser Windows","id":"402841","url":"/documentation/402841/guides/intermediate-guides/multiple-browser-windows"}]},{"name":"Advanced Guides","id":"402634/Advanced Guides","items":[{"name":"Advanced Selector Techniques","id":"403655","url":"/documentation/403655/guides/advanced-guides/advanced-selector-techniques"},{"name":"Inject Client Scripts","id":"402843","url":"/documentation/402843/guides/advanced-guides/inject-client-scripts"},{"name":"ESM Module Support","id":"404258","url":"/documentation/404258/guides/advanced-guides/esm-module-support"},{"name":"Create Custom Test Actions","id":"404150","url":"/documentation/404150/guides/advanced-guides/custom-test-actions"},{"name":"Fire DOM Events","id":"403219","url":"/documentation/403219/guides/advanced-guides/fire-dom-events"},{"name":"Execute Shell Commands on Startup","id":"403849","url":"/documentation/403849/guides/advanced-guides/execute-shell-commands-on-startup"},{"name":"Test HTTPS Features and HTTP/2 Websites","id":"402839","url":"/documentation/402839/guides/advanced-guides/test-https-features-and-http2-websites"},{"name":"Modify Reporter Output","id":"404388","url":"/documentation/404388/guides/advanced-guides/modify-reporter-output"},{"name":"Detect the Client Browser and Platform","id":"402844","url":"/documentation/402844/guides/advanced-guides/detect-the-client-browser-and-platform"},{"name":"Use the TestCafe Docker Image","id":"402838","url":"/documentation/402838/guides/advanced-guides/use-testcafe-docker-image"},{"name":"Built-In Wait Mechanisms","id":"402827","url":"/documentation/402827/guides/advanced-guides/built-in-wait-mechanisms"},{"name":"Replay Chrome User Flow Recordings","id":"403998","url":"/documentation/403998/guides/advanced-guides/chrome-replay-support"}]},{"name":"Continuous Integration","id":"402809","url":"/documentation/402809/guides/continuous-integration","items":[{"name":"Integrate TestCafe with AppVeyor","id":"402823","url":"/documentation/402823/guides/continuous-integration/appveyor"},{"name":"Integrate TestCafe with Azure DevOps","id":"402822","url":"/documentation/402822/guides/continuous-integration/azure-devops"},{"name":"Run Tests in Bitbucket Pipelines","id":"402821","url":"/documentation/402821/guides/continuous-integration/bitbucket-pipelines"},{"name":"Integrate TestCafe With CircleCI","id":"402819","url":"/documentation/402819/guides/continuous-integration/circleci"},{"name":"Run Tests on LambdaTest with CircleCI","id":"402820","url":"/documentation/402820/guides/continuous-integration/circleci-and-lambdatest"},{"name":"Integrate TestCafe with GitHub Actions","id":"402817","url":"/documentation/402817/guides/continuous-integration/github-actions"},{"name":"Run Tests on BrowserStack with GitHub Actions","id":"402818","url":"/documentation/402818/guides/continuous-integration/github-actions-and-browserstack"},{"name":"Integrate TestCafe with GitLab","id":"402816","url":"/documentation/402816/guides/continuous-integration/gitlab"},{"name":"Integrate TestCafe with Jenkins","id":"402815","url":"/documentation/402815/guides/continuous-integration/jenkins"},{"name":"Integrate TestCafe with TeamCity","id":"402847","url":"/documentation/402847/guides/continuous-integration/teamcity"},{"name":"Run Tests in Travis CI","id":"402813","url":"/documentation/402813/guides/continuous-integration/travis"},{"name":"Run Tests on Sauce Labs with Travis CI","id":"402814","url":"/documentation/402814/guides/continuous-integration/travis-and-sauce-labs"}]},{"name":"Extend TestCafe","id":"402634/Extend TestCafe","items":[{"name":"Install Plugins","id":"402811","url":"/documentation/402811/guides/extend-testcafe/install-plugins"},{"name":"Reporter Plugin","id":"402810","url":"/documentation/402810/guides/extend-testcafe/reporter-plugin"},{"name":"Browser Provider Plugin","id":"402812","url":"/documentation/402812/guides/extend-testcafe/browser-provider-plugin"}]}],"activeItems":[{"name":"Guides","id":"402634","url":"/documentation/402634/guides","headerUrl":"/documentation/402635/guides/overview/getting-started"},{"name":"Intermediate Guides","id":"402634/Intermediate Guides"},{"name":"Authentication and Roles","id":"402845","url":"/documentation/402845/guides/intermediate-guides/authentication"}],"showLeafs":true},"breadcrumbsNav":[{"name":"Guides","id":"402634","url":"/documentation/402634/guides","headerUrl":"/documentation/402635/guides/overview/getting-started"},{"name":"Intermediate Guides","id":"402634/Intermediate Guides"},{"name":"Authentication and Roles","id":"402845","url":"/documentation/402845/guides/intermediate-guides/authentication"}],"publishDates":{"teamBlog":[1687305600000,1667260800000,1661904000000,1657584000000,1637107200000,1633564800000,1632268800000,1626220800000,1612828800000,1609113600000,1607644800000,1605657600000,1605571200000,1600905600000,1599091200000,1598400000000,1597968000000,1597795200000,1595980800000,1594684800000,1593475200000,1590364800000,1587340800000],"releaseNotes":[1693267200000,1692230400000,1690416000000,1687305600000,1685318400000,1683763200000,1680739200000,1678147200000,1675036800000,1672272000000,1668038400000,1661904000000,1659916800000,1658102400000,1653523200000,1642464000000,1640131200000,1633132800000,1631059200000,1625702400000,1617753600000,1616371200000,1614729600000,1613347200000,1607990400000,1596672000000,1579219200000,1574294400000,1571184000000,1568246400000,1565136000000,1562284800000,1562025600000,1551312000000,1549497600000,1549497600000,1541548800000,1540425600000,1535932800000,1533168000000,1526342400000,1519862400000,1507593600000,1506643200000,1501632000000,1497312000000,1493164800000,1490659200000,1487203200000,1484784000000,1481155200000,1478563200000,1476662400000]}},"__N_SSG":true}